const body=document.body,time=document.getElementById("time"),startButton=document.getElementById("startButton"),pauseButton=document.getElementById("pauseButton"),resetButton=document.getElementById("resetButton"),arrowsToChangeTimer=document.querySelectorAll(".arrow"),currentProgress=document.getElementById("currentProgress"),defaultMinutes=25;let totalTime=getDisplayedTimeInSeconds(),timeToRun=getDisplayedTimeInSeconds(),breakToRun=300,runTime=0,runningClock=null,runningBreak=null;function resetAll(e){let t=60*defaultMinutes;toggleButton(e.id),pauseClock(),showArrows(),updateTimeDisplayed(t),totalTime=timeToRun=t,breakToRun=300,runningClock=runningBreak=null,runTime=currentProgress.style.width=0,body.style.backgroundColor="White"}function hideArrows(){arrowsToChangeTimer.forEach(e=>{e.style.visibility="hidden"})}function showArrows(){arrowsToChangeTimer.forEach(e=>{e.style.visibility="visible"})}function toggleButton(e){switch(e){case"startButton":startButton.disabled=!0,pauseButton.disabled=!1;break;case"pauseButton":startButton.disabled=!1,pauseButton.disabled=!0;break;case"resetButton":startButton.disabled=!1,pauseButton.disabled=!1}}function runClock(){runningClock=setInterval(function(){countDown(),updateProgressBar()},1e3),currentProgress.style.backgroundColor="DarkGreen"}function countDown(){runTime++,updateTimeDisplayed(timeToRun-=1),0===timeToRun&&(clearInterval(runningClock),updateTimeDisplayed(breakToRun),runBreak())}function runBreak(){runningBreak=setInterval(function(){updateTimeDisplayed(breakToRun-=1),0===breakToRun&&(clearInterval(runningBreak),resetAll())},1e3),body.style.backgroundColor="Orange",currentProgress.style.backgroundColor="DarkOrange"}function pauseClock(){clearInterval(runningClock),clearInterval(runningBreak),currentProgress.style.backgroundColor="DarkRed"}function changeTimer(e){switch(e.id){case"increase-by-one":updateTimeDisplayed(addMinute());break;case"increase-by-five":updateTimeDisplayed(addMinute(5));break;case"decrease-by-one":updateTimeDisplayed(removeMinute());break;case"decrease-by-five":updateTimeDisplayed(removeMinute(5))}}function updateTimeDisplayed(e){let t=returnTimeInParts(e);time.innerText=t.minutes+":"+t.seconds}function addMinute(e=1){let t=getDisplayedTimeInSeconds();return t<3660-60*e&&(t+=60*e,totalTime+=60*e,timeToRun+=60*e,updateProgressBar()),t}function removeMinute(e=1){let t=getDisplayedTimeInSeconds();return t>60*e&&(t-=60*e,totalTime-=60*e,timeToRun-=60*e,updateProgressBar()),t}function justifySingleDigits(e){return e<10&&(e="0"+e),e}function returnTimeInParts(e){let t=Math.floor(e%60),n=Math.floor(e/60%61);return{seconds:justifySingleDigits(t),minutes:justifySingleDigits(n)}}function getDisplayedTimeInSeconds(){let e=document.getElementById("time").innerText.match(/^\d+/),t=document.getElementById("time").innerText.match(/\d+$/);return 60*Number(e)+Number(t)}function updateProgressBar(){setProgressBarWidth(getProgressPercent(runTime))}function getProgressPercent(e){return e/totalTime*100}function setProgressBarWidth(e){currentProgress.style.width=e+"%"}startButton.addEventListener("click",function(){toggleButton(this.id),hideArrows(),null===runningClock?(runClock(),body.style.backgroundColor="LightGreen"):runBreak()}),pauseButton.addEventListener("click",function(){(runningClock||runningBreak)&&(toggleButton(this.id),pauseClock(),showArrows(),body.style.backgroundColor="LightSalmon")}),resetButton.addEventListener("click",function(){resetAll(this)}),arrowsToChangeTimer.forEach(e=>{e.addEventListener("click",()=>changeTimer(e))});